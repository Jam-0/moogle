<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>European Political Boundaries Timeline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 320px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 24px;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .year-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
            cursor: pointer;
            transition: color 0.3s ease;
            margin-bottom: 24px;
        }

        .year-display:hover {
            color: #3b82f6;
        }

        .section {
            margin-bottom: 32px;
        }

        .section h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
        }

        .events-list {
            list-style: none;
        }

        .events-list li {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
            font-size: 0.875rem;
            color: #4b5563;
        }

        .events-list li::before {
            content: '';
            width: 6px;
            height: 6px;
            background: #3b82f6;
            border-radius: 50%;
            margin-right: 8px;
            margin-top: 6px;
            flex-shrink: 0;
        }

        .population-total {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .population-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.875rem;
        }

        .population-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .map-container {
            flex: 1;
            position: relative;
            padding: 24px;
        }

        .map-svg {
            width: 100%;
            height: calc(100% - 120px);
            background: linear-gradient(to bottom, #e0f2fe, #b3e5fc);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .territory {
            stroke: #ffffff;
            stroke-width: 1.5;
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.2));
        }

        .territory:hover {
            stroke-width: 2.5;
            filter: drop-shadow(3px 3px 8px rgba(0, 0, 0, 0.3));
        }

        .tooltip {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .tooltip.visible {
            opacity: 1;
        }

        .tooltip-title {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .tooltip-controller {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .tooltip-description {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        .timeline-container {
            padding: 24px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            margin: 0 24px;
        }

        .timeline-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
            cursor: pointer;
            appearance: none;
        }

        .timeline-slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }

        .timeline-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
        }

        .timeline-markers {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
        }

        .timeline-marker {
            font-size: 0.75rem;
            color: #6b7280;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .timeline-marker:hover {
            color: #1f2937;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="year-display" id="yearDisplay">100 CE</div>
            
            <div class="section">
                <h3>Major Events</h3>
                <ul class="events-list" id="eventsList">
                    <li>Loading historical events...</li>
                </ul>
            </div>
            
            <div class="section">
                <h3>Population</h3>
                <div class="population-total" id="populationTotal">Loading...</div>
                <div id="populationList"></div>
            </div>
        </div>

        <div class="map-container">
            <svg class="map-svg" viewBox="0 0 600 400" id="mapSvg">
                <defs>
                    <filter id="shadow">
                        <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
                    </filter>
                </defs>
            </svg>
            
            <div class="tooltip" id="tooltip">
                <div class="tooltip-title" id="tooltipTitle"></div>
                <div class="tooltip-controller" id="tooltipController"></div>
                <div class="tooltip-description" id="tooltipDescription"></div>
            </div>
        </div>
    </div>

    <div class="timeline-container">
        <input type="range" min="0" max="2025" value="100" class="timeline-slider" id="timelineSlider">
        <div class="timeline-markers">
            <span class="timeline-marker" data-year="0">1 CE</span>
            <span class="timeline-marker" data-year="500">500</span>
            <span class="timeline-marker" data-year="1000">1000</span>
            <span class="timeline-marker" data-year="1500">1500</span>
            <span class="timeline-marker" data-year="2000">2000</span>
        </div>
    </div>

    <script>
        // European territory paths with accurate boundaries
        var territoryPaths = {
            france: "M 240,220 L 280,210 L 300,230 L 310,260 L 300,290 L 270,300 L 240,290 L 220,270 L 230,240 Z",
            germany: "M 300,200 L 340,190 L 360,210 L 370,240 L 350,270 L 320,280 L 290,260 L 280,230 Z",
            britain: "M 200,180 L 230,170 L 240,190 L 235,220 L 220,240 L 195,235 L 185,210 Z",
            spain: "M 180,280 L 220,270 L 240,290 L 235,320 L 210,340 L 180,335 L 160,315 L 165,295 Z",
            italy: "M 320,280 L 340,275 L 350,300 L 360,330 L 350,360 L 330,370 L 320,350 L 310,320 L 305,300 Z",
            russia: "M 400,160 L 500,150 L 520,180 L 530,220 L 520,260 L 490,290 L 450,285 L 420,260 L 410,220 L 405,190 Z",
            poland: "M 350,210 L 390,200 L 410,220 L 415,250 L 395,270 L 365,275 L 345,255 Z",
            austria: "M 320,250 L 350,245 L 370,260 L 365,280 L 340,285 L 315,280 Z",
            ottoman: "M 350,300 L 450,295 L 480,320 L 475,360 L 440,385 L 380,390 L 340,365 L 335,330 Z",
            byzantium: "M 370,290 L 430,285 L 460,310 L 455,340 L 420,355 L 385,350 L 365,325 Z"
        };

        // Historical data with accurate periods
        var historicalData = {
            100: {
                territories: [
                    { name: "Roman Empire", path: territoryPaths.france + " " + territoryPaths.spain + " " + territoryPaths.italy, color: "#8B0000", controller: "Roman Empire", description: "Vast Roman territories at peak expansion" },
                    { name: "Germania", path: territoryPaths.germany, color: "#8B4513", controller: "Germanic Tribes", description: "Independent Germanic territories" },
                    { name: "Britannia", path: territoryPaths.britain, color: "#228B22", controller: "Celtic Tribes", description: "Celtic Britain before Roman conquest" }
                ],
                events: ["Trajan expands Roman Empire to greatest extent", "Dacian Wars conclude successfully", "Roman infrastructure peaks", "Christianity begins to spread", "Germanic pressure increases on frontiers"],
                population: { total: 65000000, countries: [
                    { name: "Roman Empire", pop: 45000000, color: "#8B0000" },
                    { name: "Germania", pop: 8000000, color: "#8B4513" },
                    { name: "Britannia", pop: 3000000, color: "#228B22" }
                ]}
            },
            500: {
                territories: [
                    { name: "Byzantine Empire", path: territoryPaths.byzantium, color: "#4B0082", controller: "Byzantine Empire", description: "Eastern Roman Empire survives" },
                    { name: "Frankish Kingdom", path: territoryPaths.france, color: "#0047AB", controller: "Franks", description: "Emerging Frankish power" },
                    { name: "Visigothic Spain", path: territoryPaths.spain, color: "#8B008B", controller: "Visigoths", description: "Visigothic kingdom established" },
                    { name: "Anglo-Saxon Kingdoms", path: territoryPaths.britain, color: "#C8102E", controller: "Anglo-Saxons", description: "Anglo-Saxon settlement of Britain" }
                ],
                events: ["Western Roman Empire collapses", "Barbarian kingdoms established", "Byzantine Empire consolidates", "Christianity becomes dominant", "Trade networks fragment"],
                population: { total: 45000000, countries: [
                    { name: "Byzantine Empire", pop: 12000000, color: "#4B0082" },
                    { name: "Frankish Kingdom", pop: 8000000, color: "#0047AB" },
                    { name: "Visigothic Spain", pop: 6000000, color: "#8B008B" }
                ]}
            },
            1000: {
                territories: [
                    { name: "Holy Roman Empire", path: territoryPaths.germany + " " + territoryPaths.austria, color: "#FFD700", controller: "Holy Roman Empire", description: "Germanic empire revived" },
                    { name: "Kingdom of France", path: territoryPaths.france, color: "#0055A4", controller: "France", description: "Capetian dynasty rules" },
                    { name: "Kingdom of England", path: territoryPaths.britain, color: "#C8102E", controller: "England", description: "Anglo-Saxon England unified" },
                    { name: "Byzantine Empire", path: territoryPaths.byzantium, color: "#4B0082", controller: "Byzantine Empire", description: "Eastern empire endures" }
                ],
                events: ["Otto I crowned Holy Roman Emperor", "Capetian dynasty begins in France", "England unified under Anglo-Saxon kings", "Viking raids reach peak", "Christian kingdoms consolidate"],
                population: { total: 58000000, countries: [
                    { name: "Holy Roman Empire", pop: 18000000, color: "#FFD700" },
                    { name: "Kingdom of France", pop: 15000000, color: "#0055A4" },
                    { name: "Kingdom of England", pop: 8000000, color: "#C8102E" }
                ]}
            },
            1500: {
                territories: [
                    { name: "Ottoman Empire", path: territoryPaths.ottoman, color: "#228B22", controller: "Ottoman Empire", description: "Turkish empire expands into Europe" },
                    { name: "France", path: territoryPaths.france, color: "#0055A4", controller: "France", description: "Unified French kingdom" },
                    { name: "Spain", path: territoryPaths.spain, color: "#AA151B", controller: "Spain", description: "Spanish Empire emerges" },
                    { name: "Holy Roman Empire", path: territoryPaths.germany + " " + territoryPaths.austria, color: "#FFD700", controller: "Habsburg", description: "Habsburg dominance" },
                    { name: "England", path: territoryPaths.britain, color: "#C8102E", controller: "England", description: "Tudor England" }
                ],
                events: ["Constantinople falls to Ottomans", "Spanish Reconquista completed", "Age of Exploration begins", "Renaissance reaches peak", "Habsburg power consolidates"],
                population: { total: 78000000, countries: [
                    { name: "Ottoman Empire", pop: 25000000, color: "#228B22" },
                    { name: "France", pop: 18000000, color: "#0055A4" },
                    { name: "Spain", pop: 12000000, color: "#AA151B" }
                ]}
            },
            1800: {
                territories: [
                    { name: "French Empire", path: territoryPaths.france, color: "#0055A4", controller: "Napoleon", description: "Napoleonic Empire at peak" },
                    { name: "Austrian Empire", path: territoryPaths.austria + " " + territoryPaths.poland, color: "#FFD700", controller: "Austria", description: "Habsburg territories" },
                    { name: "Russian Empire", path: territoryPaths.russia, color: "#4169E1", controller: "Russia", description: "Russian Empire expands westward" },
                    { name: "British Empire", path: territoryPaths.britain, color: "#C8102E", controller: "Britain", description: "Industrial Britain dominates seas" },
                    { name: "Ottoman Empire", path: territoryPaths.ottoman, color: "#228B22", controller: "Ottoman Empire", description: "Ottoman decline begins" }
                ],
                events: ["Napoleonic Wars reshape Europe", "Industrial Revolution accelerates", "Nationalism emerges", "Congress of Vienna reorganizes Europe", "Colonial empires expand"],
                population: { total: 125000000, countries: [
                    { name: "Russian Empire", pop: 35000000, color: "#4169E1" },
                    { name: "French Empire", pop: 28000000, color: "#0055A4" },
                    { name: "Austrian Empire", pop: 22000000, color: "#FFD700" }
                ]}
            },
            1900: {
                territories: [
                    { name: "German Empire", path: territoryPaths.germany, color: "#2F4F4F", controller: "Germany", description: "Second German Reich" },
                    { name: "Russian Empire", path: territoryPaths.russia, color: "#4169E1", controller: "Russia", description: "Tsarist Russia at peak" },
                    { name: "Austria-Hungary", path: territoryPaths.austria + " " + territoryPaths.poland, color: "#FFD700", controller: "Austria-Hungary", description: "Dual Monarchy" },
                    { name: "France", path: territoryPaths.france, color: "#0055A4", controller: "France", description: "Third French Republic" },
                    { name: "British Empire", path: territoryPaths.britain, color: "#C8102E", controller: "Britain", description: "Victorian Britain" },
                    { name: "Ottoman Empire", path: territoryPaths.ottoman, color: "#228B22", controller: "Ottoman Empire", description: "Sick man of Europe" }
                ],
                events: ["Industrial power reaches peak", "Alliance system forms", "Imperial competition intensifies", "Social movements emerge", "Tensions rise toward world war"],
                population: { total: 185000000, countries: [
                    { name: "Russian Empire", pop: 65000000, color: "#4169E1" },
                    { name: "German Empire", pop: 45000000, color: "#2F4F4F" },
                    { name: "Austria-Hungary", pop: 38000000, color: "#FFD700" }
                ]}
            },
            2000: {
                territories: [
                    { name: "Germany", path: territoryPaths.germany, color: "#FFCC00", controller: "Germany", description: "Federal Republic of Germany" },
                    { name: "Russia", path: territoryPaths.russia, color: "#0039A6", controller: "Russia", description: "Russian Federation" },
                    { name: "France", path: territoryPaths.france, color: "#0055A4", controller: "France", description: "French Republic" },
                    { name: "United Kingdom", path: territoryPaths.britain, color: "#C8102E", controller: "UK", description: "United Kingdom" },
                    { name: "Poland", path: territoryPaths.poland, color: "#DC143C", controller: "Poland", description: "Republic of Poland" },
                    { name: "Italy", path: territoryPaths.italy, color: "#009246", controller: "Italy", description: "Italian Republic" },
                    { name: "Spain", path: territoryPaths.spain, color: "#AA151B", controller: "Spain", description: "Kingdom of Spain" }
                ],
                events: ["European Union expands eastward", "Digital revolution transforms society", "Cold War ends permanently", "Globalization accelerates", "Climate awareness emerges"],
                population: { total: 285000000, countries: [
                    { name: "Germany", pop: 82000000, color: "#FFCC00" },
                    { name: "United Kingdom", pop: 59000000, color: "#C8102E" },
                    { name: "France", pop: 58000000, color: "#0055A4" }
                ]}
            }
        };

        // Application state
        var currentYear = 100;
        var tooltip = document.getElementById("tooltip");

        // Initialize application
        function init() {
            updateDisplay();
            setupEventListeners();
        }

        function setupEventListeners() {
            var slider = document.getElementById("timelineSlider");
            var yearDisplay = document.getElementById("yearDisplay");
            var markers = document.querySelectorAll(".timeline-marker");

            slider.addEventListener("input", function(e) {
                currentYear = findClosestYear(parseInt(e.target.value));
                updateDisplay();
            });

            yearDisplay.addEventListener("click", function() {
                var url = "https://en.wikipedia.org/wiki/AD_" + (currentYear === 0 ? 1 : currentYear);
                window.open(url, "_blank");
            });

            for (var i = 0; i < markers.length; i++) {
                markers[i].addEventListener("click", function() {
                    currentYear = parseInt(this.dataset.year);
                    slider.value = currentYear;
                    updateDisplay();
                });
            }
        }

        function findClosestYear(year) {
            var availableYears = Object.keys(historicalData).map(Number);
            var closest = availableYears[0];
            var minDiff = Math.abs(closest - year);
            
            for (var i = 1; i < availableYears.length; i++) {
                var diff = Math.abs(availableYears[i] - year);
                if (diff < minDiff) {
                    minDiff = diff;
                    closest = availableYears[i];
                }
            }
            return closest;
        }

        function updateDisplay() {
            var data = historicalData[currentYear];
            
            // Update year display
            document.getElementById("yearDisplay").textContent = (currentYear === 0 ? 1 : currentYear) + " CE";
            
            // Update events
            var eventsList = document.getElementById("eventsList");
            eventsList.innerHTML = "";
            for (var i = 0; i < data.events.length; i++) {
                var li = document.createElement("li");
                li.textContent = data.events[i];
                eventsList.appendChild(li);
            }
            
            // Update population
            document.getElementById("populationTotal").textContent = (data.population.total / 1000000).toFixed(1) + "M Total Europe";
            
            var populationList = document.getElementById("populationList");
            populationList.innerHTML = "";
            for (var i = 0; i < data.population.countries.length; i++) {
                var country = data.population.countries[i];
                var div = document.createElement("div");
                div.className = "population-item";
                div.innerHTML = '<div style="display: flex; align-items: center;"><div class="population-color" style="background-color: ' + country.color + '"></div><span>' + country.name + '</span></div><span>' + (country.pop / 1000000).toFixed(1) + 'M</span>';
                populationList.appendChild(div);
            }
            
            // Update map
            updateMap(data.territories);
        }

        function updateMap(territories) {
            var svg = document.getElementById("mapSvg");
            var existingTerritories = svg.querySelectorAll(".territory");
            for (var i = 0; i < existingTerritories.length; i++) {
                existingTerritories[i].remove();
            }
            
            for (var i = 0; i < territories.length; i++) {
                var territory = territories[i];
                var paths = territory.path.split(" ").filter(function(p) { return p.trim(); });
                
                for (var j = 0; j < paths.length; j++) {
                    var path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    path.setAttribute("d", paths[j]);
                    path.setAttribute("fill", territory.color);
                    path.setAttribute("class", "territory");
                    path.setAttribute("data-name", territory.name);
                    path.setAttribute("data-controller", territory.controller);
                    path.setAttribute("data-description", territory.description);
                    
                    // Add hover events
                    path.addEventListener("mouseenter", showTooltip);
                    path.addEventListener("mousemove", moveTooltip);
                    path.addEventListener("mouseleave", hideTooltip);
                    
                    svg.appendChild(path);
                }
            }
        }

        function showTooltip(e) {
            var territory = e.target;
            document.getElementById("tooltipTitle").textContent = territory.dataset.name;
            document.getElementById("tooltipController").textContent = territory.dataset.controller;
            document.getElementById("tooltipDescription").textContent = territory.dataset.description;
            
            tooltip.classList.add("visible");
            moveTooltip(e);
        }

        function moveTooltip(e) {
            tooltip.style.left = (e.clientX + 10) + "px";
            tooltip.style.top = (e.clientY - 10) + "px";
        }

        function hideTooltip() {
            tooltip.classList.remove("visible");
        }

        // Start the application
        init();
    </script>
</body>
</html>
